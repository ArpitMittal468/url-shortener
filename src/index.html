<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body id="main">
    <h1>Urls Shortner</h1>
    <textarea id="input" cols="50" rows="2"></textarea>
    <button onclick="post()">Short</button>
    <textarea id="output" cols="50" rows="2"></textarea>
    <br>
    <script>
        async function post() {
            let x = await fetch('/urlPost', {
                "method": 'POST',
                "body": document.getElementById('input').value
            })
            console.log([document.getElementById('input').value])
            document.getElementById('output').value = "Loading.."
            x = await x.json()
            console.log(x)
            if (x['CD'] == "WR") {
                document.getElementById('output').value = x['ST']
            } else {

                document.getElementById('main').innerHTML += `<a target ="_blank" href="${ window.location.origin + '/' + x['ST']}">${ window.location.origin + '/' + x['ST']}</a>  <p>${document.getElementById('input').value}</p> <br>`
                document.getElementById('output').value = window.location.origin + '/' + x['ST']
            }

        }
    </script>
</body>

</html>